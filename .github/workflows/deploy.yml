   name: D√©ployer sur GitHub Pages

   on:
     push:
       branches: [ main ]

   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v4

         - name: Installer PNPM
           uses: pnpm/action-setup@v4
           # with:
           #   version: 9.12.1  # Supprim√© pour √©viter le conflit

         - name: Utiliser Node.js
           uses: actions/setup-node@v4
           with:
             node-version: '20'
             cache: 'pnpm'

         - name: Installer les d√©pendances
           run: pnpm install

         - name: Construire le projet
           run: pnpm run build

         - name: G√©n√©rer les fichiers statiques
           run: pnpm run generate

         - name: Pr√©parer les artefacts pour le d√©ploiement
           uses: actions/upload-pages-artifact@v1
           with:
             path: './dist'

     deploy:
       needs: build
       runs-on: ubuntu-latest
       permissions:
         pages: write
         id-token: write
       steps:
          - name: üîÑ Synchroniser les fichiers via FTP
            uses: SamKirkland/FTP-Deploy-Action@4.3.3
            with:
              server: ${{ secrets.HOST }}
              username: ${{ secrets.USERNAME }}
              password: ${{ secrets.PASSWORD }}
              server-dir: /
              local-dir: ./
              exclude: |
                **/.git*
                **/.git*/**
                **/node_modules/**
              include: |
                favicon/**
              protocol: ftp
              port: ${{ secrets.PORT }}
              dangerous-clean-slate: true